<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />

    <title>Forgot Password - Zetteri</title>
    <link rel="icon" type="image/x-icon" href="zetteri-favicon.png" />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body class="bg-gradient-to-br from-[#f6f8fa] to-[#e3eaf6] dark:from-[#14213d] dark:to-[#22272b]">
  <div class="relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden" style="font-family: Inter, &quot;Noto Sans&quot;, sans-serif;">
    <div class="layout-container flex h-full grow flex-col">
      <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f0f2f4] px-10 py-3">
          <div class="flex items-center gap-3 text-[#111418]">
            <div class="flex items-center justify-center">
              <img src="zetteri-logo-nobck.png" alt Zetteri Logo class="h-8 w-8 object-contain" />
            </div>
            <h2 class="text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em]">Zetteri</h2>
          </div>
        </header>
      <div class="flex flex-1 justify-center items-center py-12">
        <div class="layout-content-container flex flex-col w-full max-w-[480px] py-8 flex-1 mx-auto bg-white rounded-xl shadow-lg border border-[#e3eaf6]">
          <h2 class="text-[#111418] tracking-light text-[28px] font-bold leading-tight px-4 text-center pb-3 pt-5">Reset Your Password</h2>
          <p class="text-[#637588] text-sm font-normal leading-normal px-4 text-center pb-6">
            Enter your email address and we'll send you a link to reset your password.
          </p>
          <div class="flex flex-wrap items-end gap-4 px-4 py-3 w-full">
            <label class="flex flex-col min-w-40 flex-1">
              <p class="text-[#111418] text-base font-medium leading-normal pb-2">Email</p>
              <input
                id="email-forgot"
                type="email"
                placeholder="Enter your email"
                class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dce0e5] bg-white focus:border-[#dce0e5] h-14 placeholder:text-[#637588] p-[15px] text-base font-normal leading-normal"
              />
            </label>
          </div>
          <div id="form-message-forgot" class="hidden mb-3 px-4"></div>
          <div class="flex px-4 py-3">
            <button
              id="reset-btn"
              class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 flex-1 bg-[#197fe5] text-white text-sm font-bold leading-normal tracking-[0.015em]"
            >
              <span class="truncate">Send Reset Link</span>
            </button>
          </div>
          <p class="text-[#637588] text-sm font-normal leading-normal pb-3 pt-1 px-4 text-center">
            Remember your password? <a href="index.html" class="underline text-[#197fe5]">Log In</a>
          </p>
        </div>
      </div>
    </div>
  </div>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
    import { getAuth, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBppyJBT_uWC2hIJU-qnMZCNlac5uVTRmM",
        authDomain: "zetter-app.firebaseapp.com",
        projectId: "zetter-app",
        storageBucket: "zetter-app.appspot.com",
        messagingSenderId: "386722095231",
        appId: "1:386722095231:web:f5abe66895fea3746bdf4a",
        measurementId: "G-D7E0PDYDN5"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    function showMessage(msg, type = "error", elId = "form-message-forgot") {
        const el = document.getElementById(elId);
        el.textContent = msg;
        el.className = `mb-3 px-4 py-2 rounded text-sm font-medium ${
        type === "error"
            ? "bg-red-100 text-red-700 border border-red-200"
            : "bg-green-100 text-green-700 border border-green-200"
        }`;
        el.style.display = "block";
    }

    const emailInput = document.getElementById('email-forgot');
    const resetBtn = document.getElementById('reset-btn');

    resetBtn.addEventListener('click', async (e) => {
        e.preventDefault();
        const email = emailInput.value.trim();

        if (!email) {
        showMessage('Please enter your email address.');
        return;
        }

        resetBtn.disabled = true;
        resetBtn.innerHTML = `<svg class="animate-spin h-5 w-5 mr-2 inline" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"></path></svg>Sending...`;

        try {
        await sendPasswordResetEmail(auth, email);
        showMessage('Password reset email sent! Check your inbox.', "success");
        emailInput.value = ''; // Limpiar el campo
        } catch (error) {
        showMessage('Error: ' + error.message);
        }
        resetBtn.disabled = false;
        resetBtn.innerHTML = `<span class="truncate">Send Reset Link</span>`;
    });
    </script>
</body>
</html>